<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Load Embedded Messaging</title>
</head>
<body>
    <h1>Select Embedded Messaging Service</h1>

    <!-- Buttons to Load Embedded Messaging -->
    <button onclick="loadEmbeddedMessaging(1)">Load Mobeen ASA Embedded Service</button>
    <button onclick="loadEmbeddedMessaging(2)">Load Github Embedded Service</button>

    <script type="text/javascript">
        // Function to load the appropriate Embedded Messaging Script based on user selection
        function loadEmbeddedMessaging(selectedButton) {
            const script = document.createElement('script');
            script.type = 'text/javascript';

            // Load the first embedded script when button 1 is clicked
            if (selectedButton === 1) {
                script.src = "https://storm-eb6548a9d90757.my.site.com/ESWMobeenASAEmbeddedSe1734103431533/assets/js/bootstrap.min.js";
                script.onload = function() {
                    initEmbeddedMessaging(
                        '00Dal00000jLk2l',
                        'Mobeen_ASA_Embedded_Service',
                        'https://storm-eb6548a9d90757.my.site.com/ESWMobeenASAEmbeddedSe1734103431533'
                    );
                };
            }
            // Load the second embedded script when button 2 is clicked
            else if (selectedButton === 2) {
                script.src = "https://storm-eb6548a9d90757.my.site.com/ESWGithub1731084100499/assets/js/bootstrap.min.js";
                script.onload = function() {
                    initEmbeddedMessaging(
                        '00Dal00000jLk2l',
                        'Github',
                        'https://storm-eb6548a9d90757.my.site.com/ESWGithub1731084100499'
                    );
                };
            } else {
                console.error("Invalid selection. Please choose a valid button.");
                return;
            }

            // Append the script to the document body to load the external JS
            document.body.appendChild(script);
        }

        // Function to initialize the Embedded Messaging
        function initEmbeddedMessaging(accountId, serviceName, siteUrl) {
            try {
                embeddedservice_bootstrap.settings.language = 'en_US'; // Set language for the messaging service
                embeddedservice_bootstrap.init(
                    accountId,
                    serviceName,
                    siteUrl,
                    {
                        scrt2URL: 'https://storm-eb6548a9d90757.my.salesforce-scrt.com'
                    }
                );
            } catch (err) {
                console.error('Error loading Embedded Messaging: ', err);
            }
        }
    </script>
</body>
</html>
